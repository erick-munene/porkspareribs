!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){Date.now||(Date.now=function(){return(new Date).getTime()}),window.requestAnimationFrame||function(){"use strict";for(var t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i){var e=t[i];window.requestAnimationFrame=window[e+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var i=Date.now(),e=Math.max(n+16,i);return setTimeout(function(){t(n=e)},e-i)},window.cancelAnimationFrame=clearTimeout}}();var i=function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),i=document.createElement("div"),e=0;e<t.length;e++)if(i&&void 0!==i.style[t[e]])return t[e];return!1}(),e=function(){if(!window.getComputedStyle)return!1;var t,i=document.createElement("p"),e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};(document.body||document.documentElement).insertBefore(i,null);for(var n in e)void 0!==i.style[n]&&(i.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(i).getPropertyValue(e[n]));return(document.body||document.documentElement).removeChild(i),void 0!==t&&t.length>0&&"none"!==t}(),n=navigator.userAgent.toLowerCase().indexOf("android")>-1,a=[],o=function(){var i=0;return function(e,o){var r;this.$item=t(e),this.defaults={speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100},r=this.$item.data("jarallax")||{},this.options=t.extend({},this.defaults,r,o),this.options.speed=Math.min(1,Math.max(0,parseFloat(this.options.speed))),this.instanceID=i++,this.image={src:this.options.imgSrc||null,$container:null,$item:null,width:this.options.imgWidth||null,height:this.options.imgHeight||null,useImgTag:n},this.initImg()&&(this.init(),a.push(this))}}();o.prototype.initImg=function(){return null===this.image.src&&(this.image.src=this.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!this.image.src||"none"===this.image.src)},o.prototype.init=function(){var i=this,e={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},n={position:"fixed"};i.image.$container=t("<div>").css(e).css({visibility:"hidden","z-index":i.options.zIndex}).attr("id","jarallax-container-"+i.instanceID).prependTo(i.$item),i.image.useImgTag?(i.image.$item=t("<img>").attr("src",i.image.src),n=t.extend({},e,n)):(i.image.$item=t("<div>"),n=t.extend({"background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":"url("+i.image.src+")"},e,n)),i.image.$item.css(n).prependTo(i.image.$container),i.getImageSize(i.image.src,function(t,e){i.image.width=t,i.image.height=e,window.requestAnimationFrame(function(){i.coverImage(),i.clipContainer(),i.onScroll()}),i.$item.data("jarallax-original-styles",i.$item.attr("style")),setTimeout(function(){i.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)})},o.prototype.destroy=function(){for(var i=0,e=a.length;i<e;i++)if(a[i].instanceID===this.instanceID){a.splice(i,1);break}t("head #jarallax-clip-"+this.instanceID).remove(),this.$item.attr("style",this.$item.data("jarallax-original-styles")),this.$item.removeData("jarallax-original-styles"),this.image.$container.remove(),delete this.$item[0].jarallax},o.prototype.round=function(t){return Math.floor(100*t)/100},o.prototype.getImageSize=function(t,i){if(!t||!i)return!1;var e=new Image;e.onload=function(){i(e.width,e.height)},e.src=t},o.prototype.clipContainer=function(){var i=this.image.$container.outerWidth(!0),e=this.image.$container.outerHeight(!0),n=t("head #jarallax-clip-"+this.instanceID);n.length||(t("head").append('<style type="text/css" id="jarallax-clip-'+this.instanceID+'"></style>'),n=t("head #jarallax-clip-"+this.instanceID));var a=["#jarallax-container-"+this.instanceID+" {","   clip: rect(0px "+i+"px "+e+"px 0);","   clip: rect(0px, "+i+"px, "+e+"px, 0);","}"].join("\n");n[0].styleSheet?n[0].styleSheet.cssText=a:n.html(a)},o.prototype.coverImage=function(){if(this.image.width&&this.image.height){var i,e,n=this.image.$container.outerWidth(!0),a=this.image.$container.outerHeight(!0),o=t(window).outerWidth(!0),r=t(window).outerHeight(!0),s=this.image.width,m=this.image.height,l={width:Math.max(o,n)*Math.max(this.options.speed,1),height:Math.max(r,a)*Math.max(this.options.speed,1)};l.width/l.height>s/m?(i=l.width,e=l.width*m/s):(i=l.height*s/m,e=l.height),this.image.useImgTag?(l.width=this.round(i),l.height=this.round(e),l.marginLeft=this.round(-(i-n)/2),l.marginTop=this.round(-(e-a)/2)):l.backgroundSize=this.round(i)+"px "+this.round(e)+"px",this.image.$item.css(l)}},o.prototype.onScroll=function(){if(this.image.width&&this.image.height){var n=t(window).scrollTop(),a=t(window).height(),o=this.$item.offset().top,r={visibility:"visible",backgroundPosition:"50% 50%"};if(!(o+this.$item.outerHeight(!0)<n||o>n+a)){var s=-(n-o)*this.options.speed;s=this.round(s),i&&this.options.enableTransform?(r.transform="translateY("+s+"px)",e&&(r.transform="translate3d(0, "+s+"px, 0)")):r.backgroundPosition="50% "+s+"px",this.image.$item.css(r)}}},function(){t(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var t=0,i=a.length;t<i;t++)a[t].onScroll()})});var i;t(window).on("resize.jarallax load.jarallax",function(){clearTimeout(i),i=setTimeout(function(){window.requestAnimationFrame(function(){for(var t=0,i=a.length;t<i;t++){var e=a[t];e.coverImage(),e.clipContainer(),e.onScroll()}})},100)})}();var r=t.fn.jarallax;t.fn.jarallax=function(){for(var t,i=arguments[0],e=Array.prototype.slice.call(arguments,1),n=this.length,a=0;a<n;a++)if("object"==typeof i||void 0===i?this[a].jarallax=new o(this[a],i):t=this[a].jarallax[i].apply(this[a].jarallax,e),void 0!==t)return t;return this},t.fn.jarallax.noConflict=function(){return t.fn.jarallax=r,this},t(document).on("ready.data-jarallax",function(){t("[data-jarallax]").jarallax()})});